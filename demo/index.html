<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>gtfs-feed Demo</title>
    <script src="../bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="../dev/gtfs-feed.html">
  </head>
  <body unresolved>

    <template is="dom-bind" id="app">

      <p>An example of <code>&lt;gtfs-feed&gt;</code>:</p>

      <gtfs-feed id="feed" files="[[files]]" on-json-updated="updatedJson" on-error="gtfsError"></gtfs-feed>

    </template>

    <script>

    (function(document) {

      var app = document.querySelector('#app');

      app.files = [
        './gtfs-files/agency.txt',
        './gtfs-files/calendar.txt',
        './gtfs-files/calendar_dates.txt',
        './gtfs-files/fare_attributes.txt',
        './gtfs-files/fare_rules.txt',
        './gtfs-files/feed_info.txt',
        './gtfs-files/routes.txt',
        './gtfs-files/stop_times.txt',
        './gtfs-files/stops.txt',
        './gtfs-files/trips.txt'
      ];

      window.addEventListener('WebComponentsReady', function(e) {
        // imports are loaded and elements have been registered
        
        app.$.feed.parse();

        app.updatedJson = function() {

          console.log('JSON: ', app.$.feed.json);

        };

        app.gtfsError = function(e) {

          console.log('Error: ', e);

        };

      });

    })(document);

    </script>

  </body>
</html>
