!function(e){"use strict";var t=[{file:"agency.txt",prop:"agency"},{file:"stops.txt",prop:"stops"},{file:"routes.txt",prop:"routes"},{file:"trips.txt",prop:"trips"},{file:"stop_times.txt",prop:"stop_times"},{file:"calendar.txt",prop:"calendar"},{file:"calendar_dates.txt",prop:"calendar_dates"},{file:"fare_attributes.txt",prop:"fare_attributes"},{file:"fare_rules.txt",prop:"fare_rules"},{file:"shapes.txt",prop:"shapes"},{file:"frequencies.txt",prop:"frequencies"},{file:"transfers.txt",prop:"transfers"},{file:"feed_info.txt",prop:"feed_info"}];Polymer({is:"gtfs-feed",properties:{autoParse:{type:Boolean,value:!1,notify:!1},files:{type:Array,value:[],notify:!1,observe:"_tryParse"},json:{type:Object,value:Object.create(null),notify:!0},xml:{type:String,value:"",notify:!1,observe:"_tryParseXML"}},_tryParse:function(){this.autoParse&&this.files.length>0&&this.parseFiles()},_tryParseXML:function(){this.autoParse&&this.xml&&this.parseXML()},parseFiles:function(){var e=this,r=0,s=e.files.length;e.set("json",Object.create(null));try{e.files.forEach(function(i){for(var n="",o=0;o<t.length;++o)i.endsWith(t[o].file)&&(n=t[o].prop);n?e.csv=Papa.parse(i,{download:!0,header:!0,skipEmptyLines:!0,before:function(e,t){},error:function(t,i,n,o){e.fire("error",t),++r,r===s&&e.fire("json-updated")},complete:function(t){e.set("json."+n,t.data),++r,r===s&&e.fire("json-updated")}}):e.fire("error","File does not conform to gtfs standard")})}catch(i){e.fire("error",i)}},parseXML:function(){var e=this;try{var t=xmlToJSON.parseString(e.xml);e.set("json",Object.create(null));t.RTT&&t.RTT.length>0&&t.RTT[0].AgencyList&&t.RTT[0].AgencyList.length>0&&t.RTT[0].AgencyList[0]&&t.RTT[0].AgencyList[0].Agency&&(e.set("json.agencyList",t.RTT[0].AgencyList[0].Agency),e.fire("json-updated"))}catch(r){e.fire("error",r)}},ready:function(){},attached:function(){},detached:function(){}})}(document);